$ ./headump practice_12.c
ADDRESS 00 01 02 03 04 05 06 07 08 09 0A 0B 0C 0D 0E 0F
00000000 23 69 6E 63 6C 75 64 65 20 3C 73 74 64 69 6F 2E
00000010 68 3E 0A 23 69 6E 63 6C 75 64 65 20 3C 73 74 64
00000020 6C 69 62 2E 68 3E 0A 0A 23 64 65 66 69 6E 65 20
00000030 42 59 54 45 5F 50 45 52 5F 4C 49 4E 45 20 31 36
00000040 0A 23 64 65 66 69 6E 65 20 53 55 43 43 45 53 53
00000050 20 30 0A 23 64 65 66 69 6E 65 20 46 41 49 4C 55
00000060 52 45 20 31 0A 0A 76 6F 69 64 20 70 72 69 6E 74
00000070 48 65 78 44 75 6D 70 28 46 49 4C 45 20 2A 66 69
00000080 6C 65 29 20 7B 0A 09 75 6E 73 69 67 6E 65 64 20
00000090 63 68 61 72 20 62 75 66 66 65 72 5B 42 59 54 45
000000A0 5F 50 45 52 5F 4C 49 4E 45 5D 3B 0A 09 69 6E 74
000000B0 20 69 3B 0A 09 73 69 7A 65 5F 74 20 62 79 74 65
000000C0 73 52 65 61 64 3B 0A 09 73 69 7A 65 5F 74 20 6A
000000D0 3B 0A 09 75 6E 73 69 67 6E 65 64 20 6C 6F 6E 67
000000E0 20 61 64 64 72 65 73 73 20 3D 20 30 3B 0A 0A 0A
000000F0 09 2F 2A 20 E3 83 98 E3 83 83 E3 83 80 E3 83 BC
00000100 E3 81 AE E8 A1 A8 E7 A4 BA 20 2A 2F 0A 09 70 72
00000110 69 6E 74 66 28 22 41 44 44 52 45 53 53 20 22 29
00000120 3B 0A 09 66 6F 72 20 28 69 20 3D 20 30 3B 20 69
00000130 20 3C 20 42 59 54 45 5F 50 45 52 5F 4C 49 4E 45
00000140 3B 20 69 2B 2B 29 20 7B 0A 09 09 70 72 69 6E 74
00000150 66 28 22 25 30 32 58 20 22 2C 20 69 29 3B 0A 09
00000160 7D 0A 09 70 72 69 6E 74 66 28 22 5C 6E 22 29 3B
00000170 0A 0A 09 2F 2A 20 E3 83 95 E3 82 A1 E3 82 A4 E3
00000180 83 AB E3 81 8B E3 82 89 E8 AA AD E3 81 BF E5 8F
00000190 96 E3 82 8B E3 83 AB E3 83 BC E3 83 97 20 2A 2F
000001A0 0A 09 77 68 69 6C 65 20 28 28 62 79 74 65 73 52
000001B0 65 61 64 20 3D 20 66 72 65 61 64 28 62 75 66 66
000001C0 65 72 2C 20 73 69 7A 65 6F 66 28 75 6E 73 69 67
000001D0 6E 65 64 20 63 68 61 72 29 2C 20 42 59 54 45 5F
000001E0 50 45 52 5F 4C 49 4E 45 2C 20 66 69 6C 65 29 29
000001F0 20 3E 20 30 29 20 7B 0A 09 09 2F 2A 20 E3 82 A2
00000200 E3 83 89 E3 83 AC E3 82 B9 E3 81 AE E8 A1 A8 E7
00000210 A4 BA 20 2A 2F 0A 09 09 70 72 69 6E 74 66 28 22
00000220 25 30 38 6C 58 20 22 2C 20 61 64 64 72 65 73 73
00000230 29 3B 0A 0A 09 09 2F 2A 20 E3 83 90 E3 83 83 E3
00000240 83 95 E3 82 A1 E3 81 AE E5 86 85 E5 AE B9 E3 82
00000250 92 E8 A1 A8 E7 A4 BA 20 2A 2F 0A 09 09 66 6F 72
00000260 20 28 6A 20 3D 20 30 3B 20 6A 20 3C 20 42 59 54
00000270 45 5F 50 45 52 5F 4C 49 4E 45 3B 20 6A 2B 2B 29
00000280 20 7B 0A 09 09 09 69 66 20 28 6A 20 3C 20 62 79
00000290 74 65 73 52 65 61 64 29 20 7B 0A 09 09 09 09 70
000002A0 72 69 6E 74 66 28 22 25 30 32 58 20 22 2C 20 62
000002B0 75 66 66 65 72 5B 6A 5D 29 3B 0A 09 09 09 7D 20
000002C0 65 6C 73 65 20 7B 0A 09 09 09 09 70 72 69 6E 74
000002D0 66 28 22 20 20 20 22 29 3B 20 0A 09 09 09 7D 0A
000002E0 09 09 7D 0A 09 09 70 72 69 6E 74 66 28 22 5C 6E
000002F0 22 29 3B 0A 0A 09 09 2F 2A 20 E3 82 A2 E3 83 89
00000300 E3 83 AC E3 82 B9 E3 81 AE E6 9B B4 E6 96 B0 20
00000310 2A 2F 0A 09 09 61 64 64 72 65 73 73 20 2B 3D 20
00000320 42 59 54 45 5F 50 45 52 5F 4C 49 4E 45 3B 0A 09
00000330 7D 0A 7D 0A 0A 69 6E 74 20 6D 61 69 6E 28 69 6E
00000340 74 20 61 72 67 63 2C 20 63 68 61 72 20 2A 61 72
00000350 67 76 5B 5D 29 20 7B 0A 09 2F 2A 20 E5 A4 89 E6
00000360 95 B0 E3 81 AE E5 AE A3 E8 A8 80 20 2A 2F 0A 09
00000370 63 6F 6E 73 74 20 63 68 61 72 20 2A 66 69 6C 65
00000380 6E 61 6D 65 3B 0A 09 46 49 4C 45 20 2A 66 69 6C
00000390 65 3B 0A 0A 09 2F 2A 20 E3 82 B3 E3 83 9E E3 83
000003A0 B3 E3 83 89 E3 83 A9 E3 82 A4 E3 83 B3 E5 BC 95
000003B0 E6 95 B0 E3 81 AE E3 83 81 E3 82 A7 E3 83 83 E3
000003C0 82 AF 20 2A 2F 0A 09 69 66 20 28 61 72 67 63 20
000003D0 21 3D 20 32 29 20 7B 0A 09 09 66 70 72 69 6E 74
000003E0 66 28 73 74 64 65 72 72 2C 20 22 75 73 61 67 65
000003F0 3A 20 25 73 20 66 69 6C 65 6E 61 6D 65 5C 6E 22
00000400 2C 20 61 72 67 76 5B 30 5D 29 3B 0A 09 09 66 70
00000410 72 69 6E 74 66 28 73 74 64 65 72 72 2C 20 22 6F
00000420 70 74 69 6F 6E 73 3A 20 66 69 6C 65 6E 61 6D 65
00000430 20 20 E3 83 95 E3 82 A1 E3 82 A4 E3 83 AB E5 90
00000440 8D 5C 6E 22 29 3B 0A 09 09 72 65 74 75 72 6E 20
00000450 46 41 49 4C 55 52 45 3B 0A 09 7D 0A 0A 09 66 69
00000460 6C 65 6E 61 6D 65 20 3D 20 61 72 67 76 5B 31 5D
00000470 3B 0A 0A 09 2F 2A 20 E3 83 95 E3 82 A1 E3 82 A4
00000480 E3 83 AB E3 82 92 E3 82 AA E3 83 BC E3 83 97 E3
00000490 83 B3 20 2A 2F 0A 09 66 69 6C 65 20 3D 20 66 6F
000004A0 70 65 6E 28 66 69 6C 65 6E 61 6D 65 2C 20 22 72
000004B0 62 22 29 3B 0A 09 69 66 20 28 21 66 69 6C 65 29
000004C0 20 7B 0A 09 09 70 65 72 72 6F 72 28 22 45 72 72
000004D0 6F 72 20 6F 70 65 6E 69 6E 67 20 66 69 6C 65 22
000004E0 29 3B 0A 09 09 72 65 74 75 72 6E 20 46 41 49 4C
000004F0 55 52 45 3B 0A 09 7D 0A 0A 09 2F 2A 20 E3 83 98
00000500 E3 83 83 E3 82 AF E3 82 B9 E3 83 80 E3 83 B3 E3
00000510 83 97 E3 81 AE E8 A1 A8 E7 A4 BA 20 2A 2F 0A 09
00000520 70 72 69 6E 74 48 65 78 44 75 6D 70 28 66 69 6C
00000530 65 29 3B 0A 0A 09 2F 2A 20 E3 83 95 E3 82 A1 E3
00000540 82 A4 E3 83 AB E3 82 92 E3 82 AF E3 83 AD E3 83
00000550 BC E3 82 BA 20 2A 2F 0A 09 66 63 6C 6F 73 65 28
00000560 66 69 6C 65 29 3B 0A 0A 09 72 65 74 75 72 6E 20
00000570 53 55 43 43 45 53 53 3B 0A 7D 0A





$ xxd practice_12.c
00000000: 2369 6e63 6c75 6465 203c 7374 6469 6f2e  #include <stdio.
00000010: 683e 0a23 696e 636c 7564 6520 3c73 7464  h>.#include <std
00000020: 6c69 622e 683e 0a0a 2364 6566 696e 6520  lib.h>..#define
00000030: 4259 5445 5f50 4552 5f4c 494e 4520 3136  BYTE_PER_LINE 16
00000040: 0a23 6465 6669 6e65 2053 5543 4345 5353  .#define SUCCESS
00000050: 2030 0a23 6465 6669 6e65 2046 4149 4c55   0.#define FAILU
00000060: 5245 2031 0a0a 766f 6964 2070 7269 6e74  RE 1..void print
00000070: 5f68 6578 5f64 756d 7028 4649 4c45 202a  _hex_dump(FILE *
00000080: 6669 6c65 290a 7b0a 0975 6e73 6967 6e65  file).{..unsigne
00000090: 6420 6368 6172 2062 7566 6665 725b 4259  d char buffer[BY
000000a0: 5445 5f50 4552 5f4c 494e 455d 3b0a 0969  TE_PER_LINE];..i
000000b0: 6e74 2069 3b0a 0973 697a 655f 7420 6279  nt i;..size_t by
000000c0: 7465 7352 6561 643b 0a09 7369 7a65 5f74  tesRead;..size_t
000000d0: 206a 3b0a 0975 6e73 6967 6e65 6420 6c6f   j;..unsigned lo
000000e0: 6e67 2061 6464 7265 7373 203d 2030 3b0a  ng address = 0;.
000000f0: 0a09 2f2a 20e3 8398 e383 83e3 8380 e383  ../* ...........
00000100: bce3 81ae e8a1 a8e7 a4ba 202a 2f0a 0970  .......... */..p
00000110: 7269 6e74 6628 2241 4444 5245 5353 2022  rintf("ADDRESS "
00000120: 293b 0a09 666f 7220 2869 203d 2030 3b20  );..for (i = 0;
00000130: 6920 3c20 4259 5445 5f50 4552 5f4c 494e  i < BYTE_PER_LIN
00000140: 453b 2069 2b2b 2920 7b0a 0909 7072 696e  E; i++) {...prin
00000150: 7466 2822 2530 3258 2022 2c20 6929 3b0a  tf("%02X ", i);.
00000160: 097d 0a09 7072 696e 7466 2822 5c6e 2229  .}..printf("\n")
00000170: 3b0a 0a09 2f2a 20e3 8395 e382 a1e3 82a4  ;.../* .........
00000180: e383 abe3 818b e382 89e8 aaad e381 bfe5  ................
00000190: 8f96 e382 8be3 83ab e383 bce3 8397 202a  .............. *
000001a0: 2f0a 0977 6869 6c65 2028 2862 7974 6573  /..while ((bytes
000001b0: 5265 6164 203d 2066 7265 6164 2862 7566  Read = fread(buf
000001c0: 6665 722c 2073 697a 656f 6628 756e 7369  fer, sizeof(unsi
000001d0: 676e 6564 2063 6861 7229 2c20 4259 5445  gned char), BYTE
000001e0: 5f50 4552 5f4c 494e 452c 2066 696c 6529  _PER_LINE, file)
000001f0: 2920 3e20 3029 207b 0a09 092f 2a20 e382  ) > 0) {.../* ..
00000200: a2e3 8389 e383 ace3 82b9 e381 aee8 a1a8  ................
00000210: e7a4 ba20 2a2f 0a09 0970 7269 6e74 6628  ... */...printf(
00000220: 2225 3038 6c58 2022 2c20 6164 6472 6573  "%08lX ", addres
00000230: 7329 3b0a 0a09 092f 2a20 e383 90e3 8383  s);..../* ......
00000240: e383 95e3 82a1 e381 aee5 8685 e5ae b9e3  ................
00000250: 8292 e8a1 a8e7 a4ba 202a 2f0a 0909 666f  ........ */...fo
00000260: 7220 286a 203d 2030 3b20 6a20 3c20 4259  r (j = 0; j < BY
00000270: 5445 5f50 4552 5f4c 494e 453b 206a 2b2b  TE_PER_LINE; j++
00000280: 2920 7b0a 0909 0969 6620 286a 203c 2062  ) {....if (j < b
00000290: 7974 6573 5265 6164 2920 7b0a 0909 0909  ytesRead) {.....
000002a0: 7072 696e 7466 2822 2530 3258 2022 2c20  printf("%02X ",
000002b0: 6275 6666 6572 5b6a 5d29 3b0a 0909 097d  buffer[j]);....}
000002c0: 2065 6c73 6520 7b0a 0909 0909 7072 696e   else {.....prin
000002d0: 7466 2822 2020 2022 293b 200a 0909 097d  tf("   "); ....}
000002e0: 0a09 097d 0a09 0970 7269 6e74 6628 225c  ...}...printf("\
000002f0: 6e22 293b 0a0a 0909 2f2a 20e3 82a2 e383  n");..../* .....
00000300: 89e3 83ac e382 b9e3 81ae e69b b4e6 96b0  ................
00000310: 202a 2f0a 0909 6164 6472 6573 7320 2b3d   */...address +=
00000320: 2042 5954 455f 5045 525f 4c49 4e45 3b0a   BYTE_PER_LINE;.
00000330: 097d 0a7d 0a0a 696e 7420 6d61 696e 2869  .}.}..int main(i
00000340: 6e74 2061 7267 632c 2063 6861 7220 2a61  nt argc, char *a
00000350: 7267 765b 5d29 200a 7b0a 092f 2a20 e5a4  rgv[]) .{../* ..
00000360: 89e6 95b0 e381 aee5 aea3 e8a8 8020 2a2f  ............. */
00000370: 0a09 636f 6e73 7420 6368 6172 202a 6669  ..const char *fi
00000380: 6c65 6e61 6d65 3b0a 0946 494c 4520 2a66  lename;..FILE *f
00000390: 696c 653b 0a0a 092f 2a20 e382 b3e3 839e  ile;.../* ......
000003a0: e383 b3e3 8389 e383 a9e3 82a4 e383 b3e5  ................
000003b0: bc95 e695 b0e3 81ae e383 81e3 82a7 e383  ................
000003c0: 83e3 82af 202a 2f0a 0969 6620 2861 7267  .... */..if (arg
000003d0: 6320 213d 2032 2920 7b0a 0909 6670 7269  c != 2) {...fpri
000003e0: 6e74 6628 7374 6465 7272 2c20 2275 7361  ntf(stderr, "usa
000003f0: 6765 3a20 2573 2066 696c 656e 616d 655c  ge: %s filename\
00000400: 6e22 2c20 6172 6776 5b30 5d29 3b0a 0909  n", argv[0]);...
00000410: 6670 7269 6e74 6628 7374 6465 7272 2c20  fprintf(stderr,
00000420: 226f 7074 696f 6e73 3a20 6669 6c65 6e61  "options: filena
00000430: 6d65 2020 e383 95e3 82a1 e382 a4e3 83ab  me  ............
00000440: e590 8d5c 6e22 293b 0a09 0972 6574 7572  ...\n");...retur
00000450: 6e20 4641 494c 5552 453b 0a09 7d0a 0a09  n FAILURE;..}...
00000460: 6669 6c65 6e61 6d65 203d 2061 7267 765b  filename = argv[
00000470: 315d 3b0a 0a09 2f2a 20e3 8395 e382 a1e3  1];.../* .......
00000480: 82a4 e383 abe3 8292 e382 aae3 83bc e383  ................
00000490: 97e3 83b3 202a 2f0a 0966 696c 6520 3d20  .... */..file =
000004a0: 666f 7065 6e28 6669 6c65 6e61 6d65 2c20  fopen(filename,
000004b0: 2272 6222 293b 0a09 6966 2028 2166 696c  "rb");..if (!fil
000004c0: 6529 207b 0a09 0970 6572 726f 7228 2245  e) {...perror("E
000004d0: 7272 6f72 206f 7065 6e69 6e67 2066 696c  rror opening fil
000004e0: 6522 293b 0a09 0972 6574 7572 6e20 4641  e");...return FA
000004f0: 494c 5552 453b 0a09 7d0a 0a09 2f2a 20e3  ILURE;..}.../* .
00000500: 8398 e383 83e3 82af e382 b9e3 8380 e383  ................
00000510: b3e3 8397 e381 aee8 a1a8 e7a4 ba20 2a2f  ............. */
00000520: 0a09 7072 696e 745f 6865 785f 6475 6d70  ..print_hex_dump
00000530: 2866 696c 6529 3b0a 0a09 2f2a 20e3 8395  (file);.../* ...
00000540: e382 a1e3 82a4 e383 abe3 8292 e382 afe3  ................
00000550: 83ad e383 bce3 82ba 202a 2f0a 0966 636c  ........ */..fcl
00000560: 6f73 6528 6669 6c65 293b 0a0a 0972 6574  ose(file);...ret
00000570: 7572 6e20 5355 4343 4553 533b 0a7d 0a    urn SUCCESS;.}.


$ ./headump
usage: ./headump filename
options: filename  ファイル名
